# Консольный ввод-вывод

## Принцип работы операторов

Ранее мы рассматривали способы вызова функций сторонних библиотек. Теперь давайте рассмотрим поведение классических функций консольного ввода и вывода из языка C

Фукнция ```puts``` получает только один параметр - указатель на выводимую на экран строку

Функция ```printf``` получает на вход строку с флагами форматированного вывода, а также аргументы, указывающие на тип данных выводимых значений. Для строк передаются указатели, для всего остального - значения.

Функция ```scanf``` получает на вход строку с флагами, указыващими на вводимые переменые, а также указатели на вводимые переменные. Обратите внимание, что ```scanf``` всегда принимает на вход указатели, а не значения!

Рассмотрим несколько примеров работы с такими функциями.

``` asm
global _main
extern _puts               ; Присоединяем функцию puts 

section .data
text db "Hello world!", 0  ; Размещаем в RAM строку

section .text
_main:
	lea eax, [rel start]   ; Получаем указатель на строку и заносим его в eax
	push eax               ; Заносим в стек указатель
	call _puts             ; Вызываем функцию
	ret
```

Для сборки используйте команды:
```
nasm -f win32 <Имя файла> -o 1.obj
link 1.obj /entry:main /subsystem:console /out:<Имя выходного файла> legacy_stdio_definitions.lib ucrt.lib
```

Давайте рассмотрим более сложные функции ```printf``` и ```scanf```:

``` asm
global _main
extern _printf
extern _scanf

section .data
; Приглашение ко вводу
start db "Enter decimal value: ", 0

; Формат входной строки
format db "%d", 0

; Формат вывода
result db "Hex value: %x", 0


; Рабочая переменная
my_var dd ?

section .text
_main:
	; Выводим приглашение ко вводу:
	lea eax, [rel start]
	push eax
	call _printf
	
	; Передаём указатель на элемент в который запишем результат
	lea eax, [rel my_var]
	push eax
	; Передаём формат ввода
	lea eax, [rel input]
	push eax
	call _scanf
	
	; Передаём выводимое значение и выводим в нужном формате
	mov eax, [my_var]
	push eax
	lea eax, [rel result]
	push eax
	call _printf
	ret
```


## Задание на самостоятельную работу
1. Разработайте программу, которая выводит квадрат введённого значения
